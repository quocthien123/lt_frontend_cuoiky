{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/scrapers/news.ts"],"sourcesContent":["import * as cheerio from 'cheerio';\r\nimport { News } from '../types';\r\nimport { Article } from '../types';\r\n\r\n\r\n\r\nexport function scrapeNews($: cheerio.CheerioAPI): News[] {\r\n      const newsList: News[] = [];\r\n      $('ul.lst li.news').each((i, el) => {\r\n          const $item = $(el);\r\n          \r\n          const $titleAnchor = $item.find('a.title');\r\n          \r\n          // 2. Lấy link và tiêu đề\r\n          const title = $titleAnchor.text().trim();\r\n          const href = $titleAnchor.attr('href') ? $titleAnchor.attr('href').trim() : '';\r\n          \r\n          // 3. Lấy ảnh (nếu có) từ thẻ .thumb\r\n          const imageUrl = $item.find('.thumb img').attr('src') || '';\r\n\r\n\r\n          // Kiểm tra nếu có tiêu đề và link thì mới đẩy vào kết quả\r\n          if (title && href) {\r\n              const parts = href.split('/').filter(Boolean);\r\n              const category = parts[0] || '';\r\n              const root = '/' + (parts[0] || '');\r\n\r\n              newsList.push({\r\n                  title: title,\r\n                  link: href, // Có thể cộng thêm domain nếu cần\r\n                  imageUrl: imageUrl,\r\n                  category: category,\r\n                  root: root\r\n              });\r\n          }\r\n      });\r\n  return newsList;\r\n}"],"names":[],"mappings":";;;;AAMO,SAAS,WAAW,CAAqB;IAC1C,MAAM,WAAmB,EAAE;IAC3B,EAAE,kBAAkB,IAAI,CAAC,CAAC,GAAG;QACzB,MAAM,QAAQ,EAAE;QAEhB,MAAM,eAAe,MAAM,IAAI,CAAC;QAEhC,yBAAyB;QACzB,MAAM,QAAQ,aAAa,IAAI,GAAG,IAAI;QACtC,MAAM,OAAO,aAAa,IAAI,CAAC,UAAU,aAAa,IAAI,CAAC,QAAQ,IAAI,KAAK;QAE5E,oCAAoC;QACpC,MAAM,WAAW,MAAM,IAAI,CAAC,cAAc,IAAI,CAAC,UAAU;QAGzD,0DAA0D;QAC1D,IAAI,SAAS,MAAM;YACf,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,CAAC;YACrC,MAAM,WAAW,KAAK,CAAC,EAAE,IAAI;YAC7B,MAAM,OAAO,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE;YAElC,SAAS,IAAI,CAAC;gBACV,OAAO;gBACP,MAAM;gBACN,UAAU;gBACV,UAAU;gBACV,MAAM;YACV;QACJ;IACJ;IACJ,OAAO;AACT"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/scrapers/schedule.ts"],"sourcesContent":["// scrapers/schedule.ts\r\nimport * as cheerio from 'cheerio';\r\nimport { UpcomingMatch } from '../types';\r\n\r\nexport function scrapeUpcomingMatches($: cheerio.CheerioAPI): UpcomingMatch[] {\r\n  const matches: UpcomingMatch[] = [];\r\n\r\n  $('#fxtSlide li.mch-inf').each((_, el) => {\r\n    console.log($.html('#fxtSlide')) \r\n    const $el = $(el);\r\n    const $a = $el.find('a');\r\n    const href = $a.attr('href');\r\n    console.log(href)\r\n    if (!href) return;\r\n\r\n \r\n    const $time = $a.find('.time'); //thoi gian\r\n    const timeText = $time.text();\r\n    const timeBold = $time.find('b').text();\r\n    const dateText = timeText.replace(timeBold, ''); \r\n\r\n    // Đội nhà\r\n    const $home = $a.find('.home');\r\n\r\n    const homeName = $home.clone().children().remove().end().text(); //clone: khong phá dom gốc $home. children.romve: xoa cacthecon\r\n    //end : tro ve vi tri the cha\r\n\r\n    const homeLogo = $home.find('img').attr('src') || '';\r\n\r\n    // Đội khách\r\n    const $away = $a.find('.away');\r\n    const awayName = $away.clone().children().remove().end().text();\r\n    const awayLogo = $away.find('img').attr('src') || '';\r\n\r\n    matches.push({\r\n      link: `https://bongdaplus.vn${href}`,\r\n      date: dateText,\r\n      time: timeBold,\r\n      homeTeam: {\r\n        name: homeName,\r\n        logo: homeLogo,\r\n      },\r\n      awayTeam: {\r\n        name: awayName,\r\n        logo: awayLogo,\r\n      },\r\n    });\r\n  });\r\n\r\n  return matches;\r\n}"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAIhB,SAAS,sBAAsB,CAAqB;IACzD,MAAM,UAA2B,EAAE;IAEnC,EAAE,wBAAwB,IAAI,CAAC,CAAC,GAAG;QACjC,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC;QACnB,MAAM,MAAM,EAAE;QACd,MAAM,KAAK,IAAI,IAAI,CAAC;QACpB,MAAM,OAAO,GAAG,IAAI,CAAC;QACrB,QAAQ,GAAG,CAAC;QACZ,IAAI,CAAC,MAAM;QAGX,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,WAAW;QAC3C,MAAM,WAAW,MAAM,IAAI;QAC3B,MAAM,WAAW,MAAM,IAAI,CAAC,KAAK,IAAI;QACrC,MAAM,WAAW,SAAS,OAAO,CAAC,UAAU;QAE5C,UAAU;QACV,MAAM,QAAQ,GAAG,IAAI,CAAC;QAEtB,MAAM,WAAW,MAAM,KAAK,GAAG,QAAQ,GAAG,MAAM,GAAG,GAAG,GAAG,IAAI,IAAI,+DAA+D;QAChI,6BAA6B;QAE7B,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,UAAU;QAElD,YAAY;QACZ,MAAM,QAAQ,GAAG,IAAI,CAAC;QACtB,MAAM,WAAW,MAAM,KAAK,GAAG,QAAQ,GAAG,MAAM,GAAG,GAAG,GAAG,IAAI;QAC7D,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,UAAU;QAElD,QAAQ,IAAI,CAAC;YACX,MAAM,CAAC,qBAAqB,EAAE,MAAM;YACpC,MAAM;YACN,MAAM;YACN,UAAU;gBACR,MAAM;gBACN,MAAM;YACR;YACA,UAAU;gBACR,MAAM;gBACN,MAAM;YACR;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/route.ts"],"sourcesContent":["// src/app/api/bongdaplus/route.ts\r\nimport { NextRequest } from 'next/server';\r\nimport * as cheerio from 'cheerio';\r\nimport { scrapeNews } from './scrapers/news';\r\nimport { scrapeUpcomingMatches } from './scrapers/schedule';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const res = await fetch('https://bongdaplus.vn', {\r\n      headers: { 'User-Agent': 'Mozilla/5.0 (compatible; BongDaPlus Scraper)' },\r\n    });\r\n\r\n    if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);\r\n\r\n    const $ = cheerio.load(await res.text());\r\n\r\n    // Lấy từng loại dữ liệu\r\n    const news = scrapeNews($);\r\n    const upcomingMatches = scrapeUpcomingMatches($);\r\n\r\n    return Response.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          news,\r\n          upcomingMatches,\r\n          // Thêm các phần khác sau này: standings, results, videos...\r\n        },\r\n      },\r\n      { headers: { 'Cache-Control': 's-maxage=600' } }\r\n    );\r\n  } catch (error) {\r\n    return Response.json(\r\n      {\r\n        success: false,\r\n        error: (error as Error).message,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAElC;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,yBAAyB;YAC/C,SAAS;gBAAE,cAAc;YAA+C;QAC1E;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,cAAc,EAAE,IAAI,MAAM,EAAE;QAE1D,MAAM,IAAI,iKAAY,CAAC,MAAM,IAAI,IAAI;QAErC,wBAAwB;QACxB,MAAM,OAAO,IAAA,mKAAU,EAAC;QACxB,MAAM,kBAAkB,IAAA,kLAAqB,EAAC;QAE9C,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,MAAM;gBACJ;gBACA;YAEF;QACF,GACA;YAAE,SAAS;gBAAE,iBAAiB;YAAe;QAAE;IAEnD,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,OAAO,AAAC,MAAgB,OAAO;QACjC,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}