{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_cuoiky/frontend_backend_news/src/app/api/lichthidau/lich-thi-dau.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst LEAGUES = [\r\n   { id: 'premier-league', name: 'Ngoại Hạng Anh', url: `https://data.bongdaplus.vn/data/bong-da-anh-matches.json?_=${Date.now()}` },\r\n  { id: 'la-liga', name: 'Tây Ban Nha', url: `https://data.bongdaplus.vn/data/bong-da-tay-ban-nha-matches.json?_=${Date.now()}` },\r\n{ id: 'v-league', name: 'V-League', url: `https://data.bongdaplus.vn/data/bong-da-viet-nam-matches.json?_=${Date.now()}` },\r\n  {id: 'bundesliga', name: 'Đức', url: `https://data.bongdaplus.vn/data/bong-da-duc-matches.json?_=${Date.now()}`},\r\n {id: 'league-1', name: 'Pháp', url: `https://data.bongdaplus.vn/data/bong-da-phap-matches.json?_=${Date.now()}`},\r\n {id: 'serie-A', name: 'Ý', url: `https://data.bongdaplus.vn/data/bong-da-y-matches.json?_=${Date.now()}`},\r\n {id: 'champion-league', name: \"C1\", url: `https://data.bongdaplus.vn/data/champions-league-cup-c1-matches.json?_=${Date.now()}`}\r\n\r\n];\r\n\r\nexport async function fetchLeaguesMatches() {\r\n  let leagueName = ''\r\n  try {\r\n    // 2. Tạo danh sách các lời hứa (Promises)\r\n    const requests = LEAGUES.map(async league => {\r\n\r\n        const response = await axios.get(league.url);\r\n        leagueName = league.name\r\n        const rawData = response.data;\r\n        const dataMap = rawData.matches\r\n//        console.log(dataMap)\r\n        const matches = dataMap.map(item => ({\r\n            round_name: item.round_name,\r\n            home_name: item.home_name,\r\n            home_logo : `https://data.bongdaplus.vn/logo/${item.home_logo}`,\r\n            away_name: item.away_name,\r\n            away_logo : `https://data.bongdaplus.vn/logo/${item.away_logo}`,\r\n            start_time: item.start_time,\r\n            goals_home: item.goals_home,\r\n            goals_away: item.goals_away,\r\n            status: item.status,\r\n    }));\r\n    return {\r\n        league_name: league.id,\r\n        league_nation: league.name,\r\n        matches: matches\r\n      };\r\n    });\r\n    const finalData = await Promise.all(requests);\r\n    return finalData;\r\n  } catch (error) {\r\n    console.error(\"Lỗi hệ thống:\", error);\r\n    console.log(\"lỗi nằm ở league: \" , leagueName)\r\n    return []\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;IACb;QAAE,IAAI;QAAkB,MAAM;QAAkB,KAAK,CAAC,2DAA2D,EAAE,KAAK,GAAG,IAAI;IAAC;IACjI;QAAE,IAAI;QAAW,MAAM;QAAe,KAAK,CAAC,mEAAmE,EAAE,KAAK,GAAG,IAAI;IAAC;IAChI;QAAE,IAAI;QAAY,MAAM;QAAY,KAAK,CAAC,gEAAgE,EAAE,KAAK,GAAG,IAAI;IAAC;IACvH;QAAC,IAAI;QAAc,MAAM;QAAO,KAAK,CAAC,2DAA2D,EAAE,KAAK,GAAG,IAAI;IAAA;IAChH;QAAC,IAAI;QAAY,MAAM;QAAQ,KAAK,CAAC,4DAA4D,EAAE,KAAK,GAAG,IAAI;IAAA;IAC/G;QAAC,IAAI;QAAW,MAAM;QAAK,KAAK,CAAC,yDAAyD,EAAE,KAAK,GAAG,IAAI;IAAA;IACxG;QAAC,IAAI;QAAmB,MAAM;QAAM,KAAK,CAAC,uEAAuE,EAAE,KAAK,GAAG,IAAI;IAAA;CAE/H;AAEM,eAAe;IACpB,IAAI,aAAa;IACjB,IAAI;QACF,0CAA0C;QAC1C,MAAM,WAAW,QAAQ,GAAG,CAAC,OAAM;YAE/B,MAAM,WAAW,MAAM,2KAAK,CAAC,GAAG,CAAC,OAAO,GAAG;YAC3C,aAAa,OAAO,IAAI;YACxB,MAAM,UAAU,SAAS,IAAI;YAC7B,MAAM,UAAU,QAAQ,OAAO;YACvC,8BAA8B;YACtB,MAAM,UAAU,QAAQ,GAAG,CAAC,CAAA,OAAQ,CAAC;oBACjC,YAAY,KAAK,UAAU;oBAC3B,WAAW,KAAK,SAAS;oBACzB,WAAY,CAAC,gCAAgC,EAAE,KAAK,SAAS,EAAE;oBAC/D,WAAW,KAAK,SAAS;oBACzB,WAAY,CAAC,gCAAgC,EAAE,KAAK,SAAS,EAAE;oBAC/D,YAAY,KAAK,UAAU;oBAC3B,YAAY,KAAK,UAAU;oBAC3B,YAAY,KAAK,UAAU;oBAC3B,QAAQ,KAAK,MAAM;gBAC3B,CAAC;YACD,OAAO;gBACH,aAAa,OAAO,EAAE;gBACtB,eAAe,OAAO,IAAI;gBAC1B,SAAS;YACX;QACF;QACA,MAAM,YAAY,MAAM,QAAQ,GAAG,CAAC;QACpC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,QAAQ,GAAG,CAAC,sBAAuB;QACnC,OAAO,EAAE;IACX;AACF"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_cuoiky/frontend_backend_news/src/app/api/lichthidau/route.ts"],"sourcesContent":["// src/app/api/bongdaplus/route.ts\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { fetchLeaguesMatches } from './lich-thi-dau';\r\n\r\n//dinh nghia cors\r\nconst corsHeaders = {\r\n  'Access-Control-Allow-Origin': '*', // Cho phép tất cả các domain (localhost:5173, v.v...)\r\n  'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n  'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n  'Cache-Control': 's-maxage=600', // Giữ nguyên cache của bạn\r\n};\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const res = await fetch('https://bongdaplus.vn', {\r\n      headers: { 'User-Agent': 'Mozilla/5.0 (compatible; BongDaPlus Scraper)' },\r\n    });\r\n\r\n    if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);\r\n    const matches = await fetchLeaguesMatches();\r\n    return Response.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          matches\r\n        },\r\n      },\r\n      {status : 200,\r\n        headers : corsHeaders\r\n      }\r\n    );\r\n  } catch (error) {\r\n    console.log(\"lỗi header : \", error)\r\n    return Response.json(\r\n      {\r\n        success: false,\r\n        error: (error as Error).message,\r\n      },\r\n      { status: 500, \r\n        headers: corsHeaders\r\n      }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAElC;;AAEA,iBAAiB;AACjB,MAAM,cAAc;IAClB,+BAA+B;IAC/B,gCAAgC;IAChC,gCAAgC;IAChC,iBAAiB;AACnB;AACO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,yBAAyB;YAC/C,SAAS;gBAAE,cAAc;YAA+C;QAC1E;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,cAAc,EAAE,IAAI,MAAM,EAAE;QAC1D,MAAM,UAAU,MAAM,IAAA,uMAAmB;QACzC,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,MAAM;gBACJ;YACF;QACF,GACA;YAAC,QAAS;YACR,SAAU;QACZ;IAEJ,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,OAAO,AAAC,MAAgB,OAAO;QACjC,GACA;YAAE,QAAQ;YACR,SAAS;QACX;IAEJ;AACF"}}]
}