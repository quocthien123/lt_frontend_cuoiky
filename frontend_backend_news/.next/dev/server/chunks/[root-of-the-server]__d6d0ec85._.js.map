{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/scrapers/news.ts"],"sourcesContent":["import * as cheerio from 'cheerio';\r\nimport { News } from '../types';\r\nimport { Article } from '../types';\r\n\r\n\r\n\r\nexport function scrapeNews($: cheerio.CheerioAPI): News[] {\r\n      const newsList: News[] = [];\r\n      $('ul.lst li.news').each((i, el) => {\r\n          const $item = $(el);\r\n          \r\n          const $titleAnchor = $item.find('a.title');\r\n          \r\n          // 2. Lấy link và tiêu đề\r\n          const title = $titleAnchor.text().trim();\r\n          const href = $titleAnchor.attr('href') ? $titleAnchor.attr('href').trim() : '';\r\n          \r\n          // 3. Lấy ảnh (nếu có) từ thẻ .thumb\r\n          const imageUrl = $item.find('.thumb img').attr('src') || '';\r\n\r\n\r\n          // Kiểm tra nếu có tiêu đề và link thì mới đẩy vào kết quả\r\n          if (title && href) {\r\n              const parts = href.split('/').filter(Boolean);\r\n              const category = parts[0] || '';\r\n              const root = '/' + (parts[0] || '');\r\n\r\n              newsList.push({\r\n                  title: title,\r\n                  link: href, // Có thể cộng thêm domain nếu cần\r\n                  imageUrl: imageUrl,\r\n                  category: category,\r\n                  root: root\r\n              });\r\n          }\r\n      });\r\n  return newsList;\r\n}"],"names":[],"mappings":";;;;AAMO,SAAS,WAAW,CAAqB;IAC1C,MAAM,WAAmB,EAAE;IAC3B,EAAE,kBAAkB,IAAI,CAAC,CAAC,GAAG;QACzB,MAAM,QAAQ,EAAE;QAEhB,MAAM,eAAe,MAAM,IAAI,CAAC;QAEhC,yBAAyB;QACzB,MAAM,QAAQ,aAAa,IAAI,GAAG,IAAI;QACtC,MAAM,OAAO,aAAa,IAAI,CAAC,UAAU,aAAa,IAAI,CAAC,QAAQ,IAAI,KAAK;QAE5E,oCAAoC;QACpC,MAAM,WAAW,MAAM,IAAI,CAAC,cAAc,IAAI,CAAC,UAAU;QAGzD,0DAA0D;QAC1D,IAAI,SAAS,MAAM;YACf,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,CAAC;YACrC,MAAM,WAAW,KAAK,CAAC,EAAE,IAAI;YAC7B,MAAM,OAAO,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE;YAElC,SAAS,IAAI,CAAC;gBACV,OAAO;gBACP,MAAM;gBACN,UAAU;gBACV,UAAU;gBACV,MAAM;YACV;QACJ;IACJ;IACJ,OAAO;AACT"}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/scrapers/pupSchedule.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { json } from 'stream/consumers';\r\nimport { UpcomingMatch } from '../types'\r\n// Giả định bạn đã có URL đầy đủ từ bước 1\r\nconst JSON_URL = `https://data.bongdaplus.vn/data/top-list-matches.json?_=${Date.now()}`; \r\nconsole.log(JSON_URL)\r\nexport async function fetchUpcomingMatches() {\r\n  try {\r\n    const response = await axios.get(JSON_URL);\r\n    // Dữ liệu trả về đã là một mảng các trận đấu\r\n    const rawData = response.data; \r\n   // console.log('rawdata:', JSON.stringify(rawData, null, 2));\r\n    \r\n     const matches = rawData.map(item => ({\r\n      \r\n      link: `https://bongdaplus.vn${item.href || ''}`,\r\n      starttime: item.start_time || '',\r\n      homeTeam: {\r\n        name: item.home_name || 'Unknown',\r\n        logo: `https://bongdaplus.vn${item.home_logo}` || '',\r\n      },\r\n      awayTeam: {\r\n        name: item.away_name || 'Unknown',\r\n        logo: `https://bongdaplus.vn${item.away_logo}` || '',\r\n      },\r\n    }));\r\n    return matches\r\n  } catch (error) {\r\n    console.error('Lỗi khi tải file JSON:', error);\r\n  }\r\n}\r\nfetchUpcomingMatches();\r\n"],"names":[],"mappings":";;;;AAAA;;AAGA,0CAA0C;AAC1C,MAAM,WAAW,CAAC,wDAAwD,EAAE,KAAK,GAAG,IAAI;AACxF,QAAQ,GAAG,CAAC;AACL,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,kJAAK,CAAC,GAAG,CAAC;QACjC,6CAA6C;QAC7C,MAAM,UAAU,SAAS,IAAI;QAC9B,6DAA6D;QAE3D,MAAM,UAAU,QAAQ,GAAG,CAAC,CAAA,OAAQ,CAAC;gBAEpC,MAAM,CAAC,qBAAqB,EAAE,KAAK,IAAI,IAAI,IAAI;gBAC/C,WAAW,KAAK,UAAU,IAAI;gBAC9B,UAAU;oBACR,MAAM,KAAK,SAAS,IAAI;oBACxB,MAAM,CAAC,qBAAqB,EAAE,KAAK,SAAS,EAAE,IAAI;gBACpD;gBACA,UAAU;oBACR,MAAM,KAAK,SAAS,IAAI;oBACxB,MAAM,CAAC,qBAAqB,EAAE,KAAK,SAAS,EAAE,IAAI;gBACpD;YACF,CAAC;QACD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;IAC1C;AACF;AACA"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/scrapers/Article.ts"],"sourcesContent":["import * as cheerio from 'cheerio';\r\nimport { News } from '../types';\r\nimport { Article } from '../types';\r\nimport { ChildArticle } from '../types';\r\n\r\nexport function scrapeArticle($: cheerio.CheerioAPI): Article[] {\r\n        const articleList: Article[] = [];\r\n      \r\n        $('div.menu-side > ul.bar-w > li').each((i, el) => {\r\n\r\n            const $item = $(el);\r\n      //    console.log(`Nội dung thô của li thứ ${i}:`, $(el).text().trim());\r\n            const $titleAnchor = $item.find('> a')\r\n\r\n            const category = $titleAnchor.text();\r\n         //    console.log(`Đang quét Menu Cha: ${category}`);\r\n            const href = $titleAnchor.attr('href') || '';\r\n            const subArticleList: ChildArticle[] = [];\r\n            const $dropDown = $item.find('div.drop-down');\r\n        if ($dropDown.length > 0) {\r\n            const $subItems = $item.find('ul.lst li a');\r\n        //    console.log($subItems.text())\r\n            $subItems.each((subIdx, subEl) => {\r\n                const $subAnchor = $(subEl);\r\n                const subTitle = $subAnchor.attr('title') || $subAnchor.text().trim();\r\n                const subHref = $subAnchor.attr('href') || '';\r\n\r\n                if (subTitle) {\r\n                    subArticleList.push({\r\n                        child_title: subTitle,\r\n                        child_source_link: `https://bongdaplus.vn${subHref}`,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        if (category) {\r\n            articleList.push({\r\n                source_Link: `https://bongdaplus.vn${href}`,\r\n                title: category,\r\n                child_Article: subArticleList\r\n            });\r\n        }\r\n        });\r\n        return articleList;\r\n    }\r\n"],"names":[],"mappings":";;;;AAKO,SAAS,cAAc,CAAqB;IAC3C,MAAM,cAAyB,EAAE;IAEjC,EAAE,iCAAiC,IAAI,CAAC,CAAC,GAAG;QAExC,MAAM,QAAQ,EAAE;QACtB,wEAAwE;QAClE,MAAM,eAAe,MAAM,IAAI,CAAC;QAEhC,MAAM,WAAW,aAAa,IAAI;QACrC,qDAAqD;QAClD,MAAM,OAAO,aAAa,IAAI,CAAC,WAAW;QAC1C,MAAM,iBAAiC,EAAE;QACzC,MAAM,YAAY,MAAM,IAAI,CAAC;QACjC,IAAI,UAAU,MAAM,GAAG,GAAG;YACtB,MAAM,YAAY,MAAM,IAAI,CAAC;YACjC,mCAAmC;YAC/B,UAAU,IAAI,CAAC,CAAC,QAAQ;gBACpB,MAAM,aAAa,EAAE;gBACrB,MAAM,WAAW,WAAW,IAAI,CAAC,YAAY,WAAW,IAAI,GAAG,IAAI;gBACnE,MAAM,UAAU,WAAW,IAAI,CAAC,WAAW;gBAE3C,IAAI,UAAU;oBACV,eAAe,IAAI,CAAC;wBAChB,aAAa;wBACb,mBAAmB,CAAC,qBAAqB,EAAE,SAAS;oBACxD;gBACJ;YACJ;QACJ;QACA,IAAI,UAAU;YACV,YAAY,IAAI,CAAC;gBACb,aAAa,CAAC,qBAAqB,EAAE,MAAM;gBAC3C,OAAO;gBACP,eAAe;YACnB;QACJ;IACA;IACA,OAAO;AACX"}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///D:/1ky-1-nam-4/frontend_backend_news/src/app/api/bongdaplus/route.ts"],"sourcesContent":["// src/app/api/bongdaplus/route.ts\r\nimport { NextRequest } from 'next/server';\r\nimport * as cheerio from 'cheerio';\r\nimport { scrapeNews } from './scrapers/news';\r\nimport { fetchUpcomingMatches } from './scrapers/pupSchedule';\r\nimport { scrapeArticle } from './scrapers/Article';\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const res = await fetch('https://bongdaplus.vn', {\r\n      headers: { 'User-Agent': 'Mozilla/5.0 (compatible; BongDaPlus Scraper)' },\r\n    });\r\n\r\n    if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);\r\n\r\n    const $ = cheerio.load(await res.text());\r\n\r\n    // Lấy từng loại dữ liệu\r\n    const news = scrapeNews($);\r\n    const upcomingMatches = await fetchUpcomingMatches();\r\n    const article = scrapeArticle($)\r\n    return Response.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          article,\r\n          news,\r\n          upcomingMatches,\r\n          // Thêm các phần khác sau này: standings, results, videos...\r\n        },\r\n      },\r\n      { headers: { 'Cache-Control': 's-maxage=600' } }\r\n    );\r\n  } catch (error) {\r\n    return Response.json(\r\n      {\r\n        success: false,\r\n        error: (error as Error).message,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAElC;AAAA;AACA;AACA;AACA;;;;;AACO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,yBAAyB;YAC/C,SAAS;gBAAE,cAAc;YAA+C;QAC1E;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,cAAc,EAAE,IAAI,MAAM,EAAE;QAE1D,MAAM,IAAI,iKAAY,CAAC,MAAM,IAAI,IAAI;QAErC,wBAAwB;QACxB,MAAM,OAAO,IAAA,mKAAU,EAAC;QACxB,MAAM,kBAAkB,MAAM,IAAA,oLAAoB;QAClD,MAAM,UAAU,IAAA,yKAAa,EAAC;QAC9B,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,MAAM;gBACJ;gBACA;gBACA;YAEF;QACF,GACA;YAAE,SAAS;gBAAE,iBAAiB;YAAe;QAAE;IAEnD,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YACE,SAAS;YACT,OAAO,AAAC,MAAgB,OAAO;QACjC,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}